<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="ScheduleTest.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:s="clr-namespace:Mig.Controls.Schedule;assembly=Mig.Controls.Schedule"
        xmlns:local="clr-namespace:ScheduleTest" xmlns:sys="clr-namespace:System;assembly=mscorlib" Title="MainWindow" Height="400" Width="400">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Termin}">
            <Border Width="10" Height="10" Background="Green" />
        </DataTemplate>
        <!--<DataTemplate DataType="{x:Type local:Termin}">
			<Border Width="10" Height="10" Background="Green" />
		</DataTemplate>-->
        <Style x:Key="DefaultBorderStyle" TargetType="Border">
            <Setter Property="BorderBrush" Value="Black" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style TargetType="s:ScheduleColumnHeader">
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="s:ScheduleColumnHeader">
                        <Grid Background="Transparent">
                            <ContentPresenter Content="{TemplateBinding Content}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                            <Thumb x:Name="PART_RightGripper" Cursor="SizeWE" HorizontalAlignment="Right" Width="8" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="s:ScheduleRowHeader">
            <Setter Property="VerticalContentAlignment" Value="Top" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="s:ScheduleRowHeader">
                        <Grid Background="Transparent">
                            <ContentPresenter Content="{TemplateBinding Content}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                            <Thumb x:Name="PART_BottomGripper" Cursor="SizeNS" VerticalAlignment="Bottom" Height="8" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="{x:Type s:ScheduleRowHeaderPresenter}" TargetType="ItemsControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ItemsControl">
                        <StackPanel x:Name="ItemsHost" IsItemsHost="True" Orientation="Vertical" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="{x:Type s:ScheduleColumnHeaderPresenter}" TargetType="ItemsControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ItemsControl">
                        <StackPanel x:Name="ItemsHost" IsItemsHost="True" Orientation="Horizontal" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="s:Schedule">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="s:Schedule">
                        <SelectiveScrollingGrid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="50" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <s:ScheduleVirtualizingGrid Background="Green" x:Name="PART_ItemsHost" IsItemsHost="True" Grid.Column="1" Grid.Row="1" />
                            <s:ScheduleColumnHeaderPresenter x:Name="PART_HorizontalHeaderHost" Grid.Column="1" />
                            <s:ScheduleRowHeaderPresenter x:Name="PART_VerticalHeaderHost" Grid.Row="1" />
                            <Border x:Name="PART_TopLeft" Background="White" />
                            <!--<Grid x:Name="ItemsHost" IsItemsHost="True" Grid.Column="1" Grid.Row="1" ShowGridLines="True">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition SharedSizeGroup="Columns" />
                                    <ColumnDefinition SharedSizeGroup="Columns" />
                                </Grid.ColumnDefinitions>
                            </Grid>-->
                        </SelectiveScrollingGrid>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <!--<RowDefinition />
            <RowDefinition />
            <RowDefinition />-->
        </Grid.RowDefinitions>
        <ScrollViewer x:Name="svCenter" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" VerticalAlignment="Top"
                HorizontalAlignment="Left" VerticalContentAlignment="Top" HorizontalContentAlignment="Left" CanContentScroll="True">

            <s:Schedule x:Name="_schedule">
                <s:Schedule.Columns>
                    <s:ScheduleColumn Header="{Binding RelativeSource={RelativeSource Self}, Path=Value}" ValuePath="Datum" Width="100"
                            MinimumWidth="25" MaximumWidth="300">
                        <s:ScheduleColumn.Value>
                            <sys:DateTime>04/03/2013</sys:DateTime>
                        </s:ScheduleColumn.Value>
                    </s:ScheduleColumn>

                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                    <s:ScheduleColumn Width="100" MinimumWidth="25" MaximumWidth="300" />
                </s:Schedule.Columns>
                <s:Schedule.Rows>
                    <s:ScheduleRow Header="Abc" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Def" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Ghi" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Abc" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Def" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Ghi" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Abc" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Def" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Ghi" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Abc" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Def" Height="50" MinimumHeight="25" MaximumHeight="100" />
                    <s:ScheduleRow Header="Ghi" Height="50" MinimumHeight="25" MaximumHeight="100" />
                </s:Schedule.Rows>
            </s:Schedule>
        </ScrollViewer>

        <!--<DataGrid
			Grid.Row="1">
			<DataGrid.Columns>
				<DataGridTextColumn
					Header="123" />
				<DataGridTextColumn
					Header="456" />
			</DataGrid.Columns>
		</DataGrid>-->
        <!--<ItemsControl x:Name="HorizontalHeaderHost" Grid.Row="2">
			<ItemsControl.ItemTemplate>
				<DataTemplate DataType="s:ScheduleColumn">
					<Thumb x:Name="PART_RightGripper" HorizontalAlignment="Right" Width="8" DragStarted="thumb1_DragStarted"
							DragDelta="thumb1_DragDelta"
							DragCompleted="thumb1_DragCompleted">
					
					</Thumb>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
			<ItemsControl.Template>
			<ControlTemplate TargetType="ItemsControl">
				<StackPanel IsItemsHost="True" Orientation="Horizontal" />
				</ControlTemplate>
			</ItemsControl.Template>
		</ItemsControl>
		
		<StackPanel Orientation="Horizontal" Grid.Row="3">
			<ContentPresenter>
				<ContentPresenter.Content>
					<Border x:Name="bd1"
						        Width="10"
							Background="Green"
							HorizontalAlignment="Left"
							>
						<Thumb
							Name="thumb1"
							Width="8"
							DragStarted="thumb1_DragStarted"
							DragDelta="thumb1_DragDelta"
							DragCompleted="thumb1_DragCompleted" 
							HorizontalAlignment="Right"/>
					</Border>
				</ContentPresenter.Content>
			</ContentPresenter>
		<ContentPresenter>
				<ContentPresenter.Content>
					<Border x:Name="bd2"
						        Width="10"
							Background="Green"
							HorizontalAlignment="Left"
							>
						<Thumb
							Name="thumb2"
							Width="8"
							DragStarted="thumb2_DragStarted"
							DragDelta="thumb2_DragDelta"
							DragCompleted="thumb2_DragCompleted" 
							HorizontalAlignment="Right"/>
					</Border>
				</ContentPresenter.Content>
			</ContentPresenter>
		</StackPanel>-->
    </Grid>
    <!--<DockPanel
		Name="dp1"
		Grid.IsSharedSizeScope="False"
		VerticalAlignment="Top"
		HorizontalAlignment="Left"
		Margin="10">
		<StackPanel
			Orientation="Horizontal"
			DockPanel.Dock="Top">
			<Button
				Click="setTrue"
				Margin="0,0,10,10">Set IsSharedSizeScope="True"</Button>
			<Button
				Click="setFalse"
				Margin="0,0,10,10">Set IsSharedSizeScope="False"</Button>
		</StackPanel>
		<StackPanel
			Orientation="Horizontal"
			DockPanel.Dock="Top">
			<Grid
				ShowGridLines="True"
				Margin="0,0,10,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="50"
						SharedSizeGroup="FirstColumn" />
					<ColumnDefinition
						SharedSizeGroup="FirstColumn" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition
						Height="Auto"
						SharedSizeGroup="FirstRow" />
				</Grid.RowDefinitions>
				<Rectangle
					Fill="Silver"
					Grid.Column="0"
					Grid.Row="0"
					Width="200"
					Height="100" />
				<Rectangle
					Fill="Blue"
					Grid.Column="1"
					Grid.Row="0"
					Width="150"
					Height="100" />
				<TextBlock
					Grid.Column="0"
					Grid.Row="0"
					FontWeight="Bold">First Column</TextBlock>
				<TextBlock
					Grid.Column="1"
					Grid.Row="0"
					FontWeight="Bold">Second Column</TextBlock>
				<GridSplitter
					HorizontalAlignment="Right"
					Width="5"
					ShowsPreview="True" />
			</Grid>
			<Grid
				ShowGridLines="True">
				<Grid.ColumnDefinitions>
					<ColumnDefinition
						SharedSizeGroup="FirstColumn" />
					<ColumnDefinition
						SharedSizeGroup="FirstColumn" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition
						Height="Auto"
						SharedSizeGroup="FirstRow" />
				</Grid.RowDefinitions>
				<Rectangle
					Fill="Silver"
					Grid.Column="0"
					Grid.Row="0" />
				<Rectangle
					Fill="Blue"
					Grid.Column="1"
					Grid.Row="0" />
				<TextBlock
					Grid.Column="0"
					Grid.Row="0"
					FontWeight="Bold">First Column</TextBlock>
				<TextBlock
					Grid.Column="1"
					Grid.Row="0"
					FontWeight="Bold">Second Column</TextBlock>
			</Grid>
		</StackPanel>
		<TextBlock
			Margin="10"
			DockPanel.Dock="Top"
			Name="txt1" />
	</DockPanel>-->
</Window>